const GUNA_KEYS = ["sat", "raj", "tam"];
const KEY_TO_INDEX = { sat: 0, raj: 1, tam: 2 };

const BLEND_MATRICES = [
  {
    name: "spiral",
    matrix: [
      [0.62, 0.28, 0.1],
      [0.23, 0.57, 0.2],
      [0.18, 0.27, 0.55]
    ]
  },
  {
    name: "mirror",
    matrix: [
      [0.55, 0.35, 0.1],
      [0.2, 0.6, 0.2],
      [0.24, 0.26, 0.5]
    ]
  },
  {
    name: "veil",
    matrix: [
      [0.48, 0.32, 0.2],
      [0.28, 0.5, 0.22],
      [0.22, 0.3, 0.48]
    ]
  },
  {
    name: "ember",
    matrix: [
      [0.5, 0.4, 0.1],
      [0.18, 0.54, 0.28],
      [0.25, 0.32, 0.43]
    ]
  },
  {
    name: "prism",
    matrix: [
      [0.45, 0.3, 0.25],
      [0.3, 0.45, 0.25],
      [0.22, 0.25, 0.53]
    ]
  }
];

function buildMatrixDeck(total) {
  const base = [];
  while (base.length < total) {
    base.push(...shuffleArray(BLEND_MATRICES));
  }
  return base.slice(0, total);
}

function mixScoresWithMatrix(scores = {}, matrix) {
  const result = { sat: 0, raj: 0, tam: 0 };
  if (!matrix) {
    GUNA_KEYS.forEach((key) => {
      result[key] = scores?.[key] ?? 0;
    });
    return result;
  }

  Object.entries(scores).forEach(([key, value]) => {
    if (!Object.prototype.hasOwnProperty.call(KEY_TO_INDEX, key)) {
      if (Object.prototype.hasOwnProperty.call(result, key)) {
        result[key] += value;
      }
      return;
    }

    const row = matrix[KEY_TO_INDEX[key]];
    GUNA_KEYS.forEach((guna, index) => {
      result[guna] += value * row[index];
    });
  });

  return result;
}

function clamp(value, min, max) {
  return Math.min(Math.max(value, min), max);
}

function createFlowState() {
  return {
    phase: {
      sat: Math.random() * Math.PI * 2,
      raj: Math.random() * Math.PI * 2,
      tam: Math.random() * Math.PI * 2
    },
    speed: {
      sat: 0.08 + Math.random() * 0.05,
      raj: 0.08 + Math.random() * 0.05,
      tam: 0.08 + Math.random() * 0.05
    },
    intensity: 0.12 + Math.random() * 0.05
  };
}

function computeModulation(flow) {
  const factors = {};
  GUNA_KEYS.forEach((key) => {
    flow.phase[key] += flow.speed[key];
    factors[key] = 1 + Math.sin(flow.phase[key]) * flow.intensity;
  });
  return factors;
}

function updateFlow(flow, contributions) {
  const total = GUNA_KEYS.reduce((sum, key) => sum + contributions[key], 0);
  if (total <= 0) {
    return;
  }

  GUNA_KEYS.forEach((key, index) => {
    const nextKey = GUNA_KEYS[(index + 1) % GUNA_KEYS.length];
    const ratio = contributions[nextKey] / total;
    const adjusted = flow.speed[key] * 0.72 + ratio * 0.28;
    flow.speed[key] = clamp(adjusted, 0.05, 0.22);
  });

  const dominant = GUNA_KEYS.reduce((prev, key) =>
    contributions[key] > contributions[prev] ? key : prev,
  GUNA_KEYS[0]);

  const dominantShare = contributions[dominant] / total;
  flow.intensity = clamp(flow.intensity * 0.85 + dominantShare * 0.18, 0.08, 0.24);
}

const BASE_QUIZ = [
  {
    question: "–ù–æ—á–Ω–æ–π –ø—Ä–∏–±–æ–π —à–µ–ø—á–µ—Ç —É –±–∞–∑–∞–ª—å—Ç–æ–≤–æ–π –ø—Ä–∏—Å—Ç–∞–Ω–∏. –ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –∞–ª—Ç–∞—Ä—å —Å –¥–∞—Ä–∞–º–∏.",
    answers: [
      { text: "üåø –°–ª–æ–∂–∏—Ç—å –¥–∞—Ä—ã –æ–±—Ä–∞—Ç–Ω–æ –∏ –ø—Ä–æ—à–µ–ø—Ç–∞—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å.", scores: { sat: 3 } },
      { text: "üî• –ó–∞–±—Ä–∞—Ç—å –∂–µ–∑–ª ‚Äî –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö.", scores: { raj: 3, sat: 1 } },
      { text: "‚òæ –ü–æ–¥ —à—É–º –≤–æ–ª–Ω —Å–ø—Ä—è—Ç–∞—Ç—å –≤—Å—ë –≤ —Å–≤–æ–π –º–µ—à–æ–∫.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –í–∑—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–µ—á—É –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ—ë –±–ª–∏–∂–∞–π—à–µ–º—É —Å—Ç—Ä–∞–∂—É.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–¢—ã –≤—Ö–æ–¥–∏—à—å –≤ —Ö—Ä–∞–º–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É: —Å–≤–∏—Ç–∫–∏ –ø–∞—Ö–Ω—É—Ç –ø–µ–ø–ª–æ–º, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –∂–¥—ë—Ç —Ä–µ—à–µ–Ω–∏—è –ø–æ —Ä–µ–¥–∫–æ–π –∫–Ω–∏–≥–µ.",
    answers: [
      { text: "üåø –û—Å—Ç–∞–≤–∏—Ç—å —Å–≤–∏—Ç–æ–∫ –∏ –ø–æ–º–æ—á—å –ø–µ—Ä–µ–ø–∏—Å—á–∏–∫—É –¥–æ —Ä–∞—Å—Å–≤–µ—Ç–∞.", scores: { sat: 3 } },
      { text: "üî• –í—ã–∫—É–ø–∏—Ç—å –∫–Ω–∏–≥—É –∏ –∏–∑—É—á–∏—Ç—å —Ç–∞–π–Ω—É –ø–µ—Ä–≤—ã–º.", scores: { raj: 3 } },
      { text: "‚òæ –°–ø—Ä—è—Ç–∞—Ç—å –Ω–∞—Ö–æ–¥–∫—É, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–≤–ª—ë–∫ —Ç–µ–±—è —Å–Ω–∞–º–∏.", scores: { tam: 2, raj: 1 } },
      { text: "‚öñÔ∏è –û–±–º–µ–Ω—è—Ç—å –∫–Ω–∏–≥—É –Ω–∞ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–∞ –∑–∞—á–∞—Ä–æ–≤–∞–Ω–∏—è.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–£ —Å—Ç–æ–π–±–∏—â–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π –≤—å—é—á–Ω—ã–π –∑–≤–µ—Ä—å –≤–∞–ª–∏—Ç—Å—è –Ω–∞ –±–æ–∫. –ö–∞—Ä–∞–≤–∞–Ω—â–∏–∫ –∑–æ–≤—ë—Ç –Ω–∞ –ø–æ–º–æ—â—å.",
    answers: [
      { text: "üåø –ü–µ—Ä–µ–≤—è–∑–∞—Ç—å —Å—É–º—ã –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∏—Ö –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –ª–∞–≥–µ—Ä—è.", scores: { sat: 3 } },
      { text: "üî• –ü–æ—Ç–æ—Ä–≥–æ–≤–∞—Ç—å—Å—è –∑–∞ –æ–ø–ª–∞—Ç—É –∏ –ø–æ–º–æ—á—å –±—ã—Å—Ç—Ä–æ.", scores: { raj: 3 } },
      { text: "‚òæ –£–∫–∞–∑–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É –∏ —É–π—Ç–∏ –¥–æ —Ä–∞—Å—Å–≤–µ—Ç–∞.", scores: { tam: 2 } },
      { text: "‚öñÔ∏è –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–µ—á–∞—â–∏–º –∑–µ–ª—å–µ–º –∏ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ —Å–≤–æ–∏–º –ø—É—Ç—ë–º.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–®–∫—É—Ä—ã –≤ –æ—Ö–æ—Ç–Ω–∏—á—å–µ–º –ª–∞–≥–µ—Ä–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω—ã —à—Ç–æ—Ä–º–æ–º. –ö—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –≤–∑—è—Ç—å –Ω–æ—á–Ω—É—é –≤–∞—Ö—Ç—É.",
    answers: [
      { text: "üåø –û—Å—Ç–∞—ë—à—å—Å—è —Å—Ç–æ—Ä–æ–∂–∏—Ç—å, —Å–æ–≥—Ä–µ–≤–∞—è –∫–æ—Å—Ç—ë—Ä –º–æ–ª–∏—Ç–≤–∞–º–∏.", scores: { sat: 2, raj: 1 } },
      { text: "üî• –û—Ä–≥–∞–Ω–∏–∑—É–µ—à—å –∫–∞—Ä–∞—É–ª –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—à—å –Ω–∞–≥—Ä–∞–¥—É.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥ —à—É–º –¥–æ–∂–¥—è –∏—Å—á–µ–∑–∞–µ—à—å —Å –ª—É—á—à–µ–π —à–∫—É—Ä–æ–π.", scores: { tam: 3 } },
      { text: "üúÇ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—à—å –≤—ã—Å–ª–µ–¥–∏—Ç—å –≤–∏–Ω–æ–≤–Ω–∏–∫–æ–≤ –Ω–µ–º–µ–¥–ª—è.", scores: { raj: 2, tam: 1 } }
    ]
  },
  {
    question: "–£—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–∑–∞—Ä –≥—É–¥–∏—Ç. –°—Ç–∞—Ä—É—Ö–∞ –ø—Ä–æ—Å–∏—Ç –æ—Ç–Ω–µ—Å—Ç–∏ —Å–≤—ë—Ä—Ç–æ–∫ –¥–æ –¥–æ–º–∞ –Ω–∞ —Ö–æ–ª–º–µ.",
    answers: [
      { text: "üåø –ù–µ—Å—Ç–∏ —Å–≤—ë—Ä—Ç–æ–∫ –º–µ–¥–ª–µ–Ω–Ω–æ, —Å–ª—É—à–∞—è –µ—ë –∏—Å—Ç–æ—Ä–∏—é.", scores: { sat: 3 } },
      { text: "üî• –°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∑–∞ –º–æ–Ω–µ—Ç—É –∏ –±–µ–∂–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–æ–π –¥–æ—Ä–æ–≥–æ–π.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –ø–æ–∑–∂–µ.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ù–∞–π—Ç–∏ —É—á–µ–Ω–∏–∫–∞ –≥–∏–ª—å–¥–∏–∏ –∏ –ø–æ—Ä—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –µ–º—É.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–ù–∞ –ø–ª–∞—Ü—É –∞—Ä–∫–∞–Ω—ã –≤—Å–ø—ã—Ö–Ω—É–ª–∞ –¥—É—ç–ª—å –º–∞–≥–æ–≤. –ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –≤–º–µ—à–∏–≤–∞—Ç—å—Å—è –ª–∏ –≤ —Å–ø–æ—Ä.",
    answers: [
      { text: "üåø –í—Å—Ç–∞—Ç—å –º–µ–∂–¥—É –Ω–∏–º–∏, –∑–∞–∫—Ä—ã–≤–∞—è –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã —â–∏—Ç–æ–º.", scores: { sat: 3 } },
      { text: "üî• –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å–∏–ª—å–Ω–µ–π—à–µ–≥–æ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–æ—é–∑.", scores: { raj: 3 } },
      { text: "‚òæ –†–∞–∑–∂–µ—á—å —Å–ø–æ—Ä, —à–µ–ø—á–∞ –∫–∞–∂–¥–æ–º—É —è–¥ —Å–æ–º–Ω–µ–Ω–∏–π.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ù–∞–ø–æ–º–Ω–∏—Ç—å –∏–º –æ –∫–æ–¥–µ–∫—Å–µ –∏ –æ—Ç–≤–µ—Å—Ç–∏ –≤ –≥–∏–ª—å–¥–∏—é.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–í –ø–µ–ø–µ–ª—å–Ω–æ–π –±—É—Ä–µ –ø—É—Ç–Ω–∏–∫ —Ç–µ—Ä—è–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é. –ï–≥–æ —Ñ–∞–∫–µ–ª –≥–∞—Å–Ω–µ—Ç.",
    answers: [
      { text: "üåø –û—Ç–¥–∞—Ç—å —Å–≤–æ–π —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å –¥–æ —É–±–µ–∂–∏—â–∞.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–æ–¥–∞—Ç—å —Ñ–∞–∫–µ–ª, –µ—Å–ª–∏ –æ–Ω –æ–±–µ—â–∞–µ—Ç —É—Å–ª—É–≥—É.", scores: { raj: 2, sat: 1 } },
      { text: "‚òæ –£–∫–∞–∑–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω—É—é —Ç—Ä–æ–ø—É –∏ —Å–∫—Ä—ã—Ç—å—Å—è –≤–æ –º—Ä–∞–∫–µ.", scores: { tam: 3 } },
      { text: "üúÇ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–µ—Ä–∂–∞—Ç—å—Å—è —Ä—è–¥–æ–º –∏ —É—Å–∫–æ—Ä–∏—Ç—å —à–∞–≥.", scores: { raj: 2 } }
    ]
  },
  {
    question: "–í —Ç—Ä–∞–∫—Ç–∏—Ä–µ –Ω–∞ —Ä–∞—Å–ø—É—Ç—å–µ —Å–ø–æ—Ä—è—Ç –æ –¥—Ä–µ–≤–Ω–µ–º –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–µ. –°–ª–æ–≤–æ –∑–∞ —Ç–æ–±–æ–π.",
    answers: [
      { text: "üåø –ù–∞–ø–æ–º–Ω–∏—Ç—å –æ –º–∏–ª–æ—Å–µ—Ä–¥–∏–∏ –∏ —Ç–∏—Ö–æ–π –≤–µ—Ä–µ.", scores: { sat: 3 } },
      { text: "üî• –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª–ø—É —Å—Ç–æ—Ä–æ–Ω–Ω–∏–∫–æ–≤ –∏ –≤–µ—Å—Ç–∏ –∏—Ö –Ω–∞ –ø–ª–æ—â–∞–¥—å.", scores: { raj: 3 } },
      { text: "‚òæ –í—ã—Å–º–µ—è—Ç—å –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ –∏ —Ä–∞–∑–±—Ä–æ—Å–∞—Ç—å —Å–ª—É—Ö–∏.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–í –≥–ª—É–±–æ–∫–æ–π –ø–µ—â–µ—Ä–µ –º–µ—Ä—Ü–∞–µ—Ç —Å–∏–Ω–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª. –û–Ω –ø–æ—ë—Ç —Å–∏–ª–∞–º–∏, —á—Ç–æ —Å–ø—è—Ç –≤–µ–∫–∞–º–∏.",
    answers: [
      { text: "üåø –û—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª –∏ –æ—á–∏—Å—Ç–∏—Ç—å –∞–ª—Ç–∞—Ä—å –æ—Ç —Ç—å–º—ã.", scores: { sat: 3 } },
      { text: "üî• –ó–∞–±—Ä–∞—Ç—å –∫–∞–º–µ–Ω—å —Ä–∞–¥–∏ –Ω–æ–≤—ã—Ö —á–∞—Ä.", scores: { raj: 3 } },
      { text: "‚òæ –†–∞–∑–±–∏—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª –∏ –≤–ø–∏—Ç–∞—Ç—å –µ–≥–æ –¥—ã–º.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ó–∞–ø–µ—á–∞—Ç–∞—Ç—å –≤—Ö–æ–¥ –∏ –∑–∞–ø–∏—Å–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –æ—Ä–¥–µ–Ω–∞.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–£ –ø—Ä–∏–¥–æ—Ä–æ–∂–Ω–æ–π –∫–æ—Ä—á–º—ã –±—Ä–æ–¥—è–≥–∞ –ø—Ä–æ—Å–∏—Ç —Ç—ë–ø–ª—ã–π –ø–ª–∞—â –ø–µ—Ä–µ–¥ –≥—Ä–æ–∑–æ–π.",
    answers: [
      { text: "üåø –°–Ω—è—Ç—å —Å–≤–æ–π –ø–ª–∞—â –∏ –Ω–∞–∫–∏–Ω—É—Ç—å –µ–º—É –Ω–∞ –ø–ª–µ—á–∏.", scores: { sat: 3 } },
      { text: "üî• –û–¥–æ–ª–∂–∏—Ç—å –ø–ª–∞—â –∑–∞ –∫–ª—è—Ç–≤—É, —á—Ç–æ –≤–µ—Ä–Ω—ë—Ç —Å –ø—Ä–∏–±—ã–ª—å—é.", scores: { raj: 2, sat: 1 } },
      { text: "‚òæ –û—Ç—Ç–æ–ª–∫–Ω—É—Ç—å –µ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏–≤–ª—ë–∫ —Å—Ç—Ä–∞–∂—É.", scores: { tam: 3 } },
      { text: "üúÇ –£–∫–∞–∑–∞—Ç—å –¥–æ—Ä–æ–≥—É –∫ —Å–∫–ª–∞–¥—É –∏ –ø–æ–π—Ç–∏ –ø–æ —Å–≤–æ–∏–º –¥–µ–ª–∞–º.", scores: { raj: 2 } }
    ]
  },
  {
    question: "–í —Å—Ç–∞—Ä–æ–º –ø–æ–¥–∑–µ–º–µ–ª—å–µ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å —Å–µ—Ä–¥—Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∞ –∏ –¥–Ω–µ–≤–Ω–∏–∫ –º–∞—Å—Ç–µ—Ä–∞.",
    answers: [
      { text: "üåø –û—Ç–Ω–µ—Å—Ç–∏ –¥–Ω–µ–≤–Ω–∏–∫ –≤ —Ö—Ä–∞–º, —á—Ç–æ–±—ã –∑–Ω–∞–Ω–∏—è —Å–ª—É–∂–∏–ª–∏ –º–∏—Ä—É.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–æ–¥–∞—Ç—å —Å–µ—Ä–¥—Ü–µ –∏ –≤–ª–æ–∂–∏—Ç—å –¥–µ–Ω—å–≥–∏ –≤ –≥–∏–ª—å–¥–∏—é.", scores: { raj: 3 } },
      { text: "‚òæ –û–∂–∏–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ —Å—Ç—Ä–∞–∂—É —Å–≤–æ–∏—Ö –¥–µ–ª.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞—Ö–æ–¥–∫—É –º–µ–∂–¥—É —Å–æ—é–∑–Ω–∏–∫–∞–º–∏.", scores: { sat: 1, raj: 2 } }
    ]
  },
  {
    question: "–ù–∞ –º–æ—Å—Ç—É —Ç–æ–ª–ø–∞ –æ–∫—Ä—É–∂–∏–ª–∞ —Ä–∞–Ω–µ–Ω–æ–≥–æ —Å—Ç—Ä–∞–∂–∞.",
    answers: [
      { text: "üåø –ü–µ—Ä–µ–≤—è–∑–∞—Ç—å —Ä–∞–Ω—É –∏ —É—Å–ø–æ–∫–æ–∏—Ç—å –ª—é–¥–µ–π.", scores: { sat: 3 } },
      { text: "üî• –°–æ–±—Ä–∞—Ç—å –¥–æ–±—Ä–æ–≤–æ–ª—å—Ü–µ–≤ –∏ —É—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≥–æ–Ω—é –∑–∞ –≤–∏–Ω–æ–≤–Ω–∏–∫–æ–º.", scores: { raj: 3 } },
      { text: "‚òæ –û–±—à–∞—Ä–∏—Ç—å –∫–∞—Ä–º–∞–Ω—ã, –ø–æ–∫–∞ –≤—Å–µ –æ—Ç–≤–ª–µ—á–µ–Ω—ã.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ü–µ—Ä–µ–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–º—É –æ—Ñ–∏—Ü–µ—Ä—É.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ù–∞ —è—Ä–º–∞—Ä–∫–µ —Ç—ã –≤—ã–∏–≥—Ä—ã–≤–∞–µ—à—å —Ä–µ–¥–∫–∏–π –∞–º—É–ª–µ—Ç. –¢–æ–ª–ø–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≥–æ—Ä–æ–¥—É.",
    answers: [
      { text: "üåø –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å –∞–º—É–ª–µ—Ç —Ö—Ä–∞–º—É –∏ –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –ª—é–¥–µ–π.", scores: { sat: 3 } },
      { text: "üî• –£—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ—Ä–≥–∏ –∏ –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é —Å—Ç–∞–≤–∫—É.", scores: { raj: 3 } },
      { text: "‚òæ –°–ø—Ä—è—Ç–∞—Ç—å –∞–º—É–ª–µ—Ç –ø–æ–¥ –ø–ª–∞—â –∏ —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è –≤ –ª—é–¥—è—Ö.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –û—Å—Ç–∞–≤–∏—Ç—å –∞–º—É–ª–µ—Ç —Å–µ–±–µ, –Ω–æ –ø–æ–æ–±–µ—â–∞—Ç—å –æ–±–µ—Ä–µ–≥–∞—Ç—å –≥–æ—Ä–æ–¥.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ü–µ—Ä–µ–¥ –≤–æ—Ä–æ—Ç–∞–º–∏ —Å—Ç–æ–∏—Ç –≥–æ–ª–æ–¥–Ω—ã–π —Ä–µ–±—ë–Ω–æ–∫ –∏ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ç–≤–æ–π –º–µ—à–æ–∫ —Å—É—Ö–∞—Ä–µ–π.",
    answers: [
      { text: "üåø –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –æ–Ω –Ω–∞—Å—ã—Ç–∏—Ç—Å—è.", scores: { sat: 3 } },
      { text: "üî• –í—Ä—É—á–∏—Ç—å –ø–æ–ª–æ–≤–∏–Ω—É –≤ –æ–±–º–µ–Ω –Ω–∞ –ø–æ–º–æ—â—å –ø–æ –¥–µ–ª–∞–º.", scores: { raj: 2, sat: 1 } },
      { text: "‚òæ –£–π—Ç–∏ –±—ã—Å—Ç—Ä–µ–µ, —á—Ç–æ–±—ã –µ–≥–æ –≤–∏–¥ –Ω–µ —Ç—Ä–µ–≤–æ–∂–∏–ª —Å–µ—Ä–¥—Ü–µ.", scores: { tam: 2 } },
      { text: "üúÇ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –∫ –∫–∞—Ä–∞–≤–∞–Ω—â–∏–∫–∞–º, –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—è—Å—å.", scores: { raj: 2 } }
    ]
  },
  {
    question: "–í –ø–æ–¥–≤–∞–ª–µ –¥–æ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω —Ç–∞–π–Ω—ã–π –∫–ª—É–±. –û–Ω–∏ –ø—Ä–æ—Å—è—Ç –¥–µ—Ä–∂–∞—Ç—å –≤—Å—ë –≤ —Å–µ–∫—Ä–µ—Ç–µ.",
    answers: [
      { text: "üåø –†–∞–∑–æ–±–ª–∞—á–∏—Ç—å –∫–ª—É–± –∏ –∑–∞—â–∏—Ç–∏—Ç—å —Å–æ—Å–µ–¥–µ–π.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è —Ä–∞–¥–∏ –≤–ª–∏—è–Ω–∏—è –∏ —Å–≤—è–∑–µ–π.", scores: { raj: 3 } },
      { text: "‚òæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è —Å–≤–æ–∏—Ö —Ç–µ–Ω–µ–≤—ã—Ö –ø–æ—Ä—É—á–µ–Ω–∏–π.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –≥–∏–ª—å–¥–∏–µ–π.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–í –ø–æ–¥–∑–µ–º–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö —Å–ª—ã—à–Ω–æ –ø–ª–∞—á –ø—Ä–∏–≤–∏–¥–µ–Ω–∏—è. –û–Ω–æ –ø—Ä–æ—Å–∏—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–π —Ä–∏—Ç—É–∞–ª.",
    answers: [
      { text: "üåø –ü–æ–º–æ—á—å –¥—É—Ö—É –æ–±—Ä–µ—Å—Ç–∏ –ø–æ–∫–æ–π, –∑–∞–±—ã–≤ –æ –Ω–∞–≥—Ä–∞–¥–µ.", scores: { sat: 3 } },
      { text: "üî• –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∏—Ç—É–∞–ª –∑–∞ –æ–±–µ—â–∞–Ω–Ω–æ–µ –∑–æ–ª–æ—Ç–æ.", scores: { raj: 3 } },
      { text: "‚òæ –°–≤—è–∑–∞—Ç—å –¥—É—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–∏—Ö –¥–µ–ª–∞—Ö.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ü–æ–∑–≤–∞—Ç—å –∂—Ä–µ—Ü–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ì–æ—Ä–æ–¥—Å–∫–∞—è —Ñ—Ä–∞–∫—Ü–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–±—Ä–∞—Ç—å —Ç–≤–æ–µ–≥–æ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –∑–∞ –ø–ª–∞—Ç—É.",
    answers: [
      { text: "üåø –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –æ–± —É–≥—Ä–æ–∑–µ.", scores: { sat: 3 } },
      { text: "üî• –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è, —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –∑–∞–∫–æ–Ω–Ω–æ.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –Ω–µ –∑–∞–¥–∞–≤–∞—è –≤–æ–ø—Ä–æ—Å–æ–≤.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã —É–∫—Ä–µ–ø–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å –±–µ–∑ –∫—Ä–æ–≤–∏.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–í –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã—Ö —Ä—É–∏–Ω–∞—Ö —Ç–≤–æ–π —Å–ø—É—Ç–Ω–∏–∫ —Ä–∞–Ω–µ–Ω –ª–æ–≤—É—à–∫–æ–π. –í—Ä–µ–º–µ–Ω–∏ –º–∞–ª–æ.",
    answers: [
      { text: "üåø –ù–µ—Å—Ç–∏ –µ–≥–æ –¥–æ –≤—ã—Ö–æ–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—É—Ç—å —É–¥–ª–∏–Ω–∏—Ç—Å—è.", scores: { sat: 4 } },
      { text: "üî• –û—Å—Ç–∞–≤–∏—Ç—å —Å –∑–µ–ª—å–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–∏—Å—Å–∏—é.", scores: { raj: 3, sat: 1 } },
      { text: "‚òæ –ó–∞–±—Ä–∞—Ç—å –µ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ –æ–¥–Ω–æ–º—É.", scores: { tam: 4 } },
      { text: "üúÇ –°–∫—Ä—ã—Ç—å —Å–ø—É—Ç–Ω–∏–∫–∞ –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å –ø–æ–¥–º–æ–≥–æ–π –ø–æ–∑–∂–µ.", scores: { sat: 2, raj: 2 } }
    ]
  },
  {
    question: "–ù–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–π –ø–ª–æ—â–∞–¥–∏ —Å–ø–æ—Ä—è—Ç, –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ª–∏ –≤—Ä–∞—Ç–∞ –Ω–æ—á—å—é.",
    answers: [
      { text: "üåø –£–±–µ–¥–∏—Ç—å —Å–æ–≤–µ—Ç –¥–∞—Ç—å –ø—Ä–∏—é—Ç –≤—Å–µ–º –ø—É—Ç–Ω–∏–∫–∞–º.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π –≤—Ö–æ–¥ –∏ —É—Å–∏–ª–µ–Ω–Ω—É—é –æ—Ö—Ä–∞–Ω—É.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∫–∞–∑–Ω–∏ —Ç–µ—Ö, –∫—Ç–æ –≤–æ–∑—Ä–∞–∂–∞–µ—Ç.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ù–∞–π—Ç–∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å: —É–±–µ–∂–∏—â–µ –≤ —Ö—Ä–∞–º–µ –∏ –∫–∞—Ä–∞—É–ª—ã —É –≤–æ—Ä–æ—Ç.", scores: { sat: 2, raj: 2 } }
    ]
  },
  {
    question: "–í–æ —Å–Ω–µ –Ω–µ–∑–Ω–∞–∫–æ–º–∞—è –±–æ–≥–∏–Ω—è –ø—Ä–æ—Ç—è–≥–∏–≤–∞–µ—Ç —Ç—Ä–∏ –ª—É—á–∞ —Å–≤–µ—Ç–∞, –∫–∞–∂–¥—ã–π –æ–±–µ—â–∞–µ—Ç –Ω–æ–≤—É—é —Å—É–¥—å–±—É.",
    answers: [
      { text: "üåø –ü—Ä–∏–Ω—è—Ç—å –ª—É—á –º–∏–ª–æ—Å–µ—Ä–¥–∏—è –∏ —Å–ª—É–∂–∏—Ç—å –∏—Å—Ü–µ–ª–µ–Ω–∏–µ–º.", scores: { sat: 4 } },
      { text: "üî• –í—ã–±—Ä–∞—Ç—å –ª—É—á –≤–ª–∞—Å—Ç–∏ –∏ –≤–µ—Å—Ç–∏ –ª—é–¥–µ–π –≤ –±–æ–π.", scores: { raj: 4 } },
      { text: "‚òæ –¢—è–Ω—É—Ç—å—Å—è –∫ –ª—É—á—É –∑–∞–±–≤–µ–Ω–∏—è –∏ —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è –≤ —Ç–∏—à–∏–Ω–µ.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –ü–µ—Ä–µ–ø–ª–µ—Å—Ç–∏ –ª—É—á–∏, –ø—ã—Ç–∞—è—Å—å —É–¥–µ—Ä–∂–∞—Ç—å –±–∞–ª–∞–Ω—Å.", scores: { sat: 2, raj: 2, tam: 1 } }
    ]
  },
  {
    question: "–£ –ø–æ–¥–Ω–æ–∂–∏—è –ø—ã–ª–∞—é—â–µ–π –≥–æ—Ä—ã —Å–ª—ã—à–µ–Ω —à—ë–ø–æ—Ç, –æ–±–µ—â–∞—é—â–∏–π —Å–∏–ª—É –∑–∞ –æ–¥–Ω—É –∫–ª—è—Ç–≤—É.",
    answers: [
      { text: "üåø –û—Ç–∫–∞–∑–∞—Ç—å –∏ –∑–∞—Å—ã–ø–∞—Ç—å –≤—Ö–æ–¥ –ø–µ–ø–ª–æ–º.", scores: { sat: 3 } },
      { text: "üî• –í—ã—Ç–æ—Ä–≥–æ–≤–∞—Ç—å –ø–æ–º–æ—â—å –¥–ª—è —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞.", scores: { raj: 3 } },
      { text: "‚òæ –ü—Ä–∏–Ω—è—Ç—å –∫–ª—è—Ç–≤—É, –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—è—Å—å —Ü–µ–Ω–æ–π.", scores: { tam: 4 } },
      { text: "üúÇ –ó–∞–ø–∏—Å–∞—Ç—å –≤—Å—ë –≤ –¥–Ω–µ–≤–Ω–∏–∫ –∏ –¥–æ–ª–æ–∂–∏—Ç—å –∂—Ä–µ—Ü–∞–º.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–£ –≤–æ—Ä–æ—Ç –ø–æ—Å–µ–ª–µ–Ω–∏—è —á—É–∂–µ–∑–µ–º–µ—Ü –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –∫ —Å–≤—è—Ç—ã–Ω–µ, —Å—Ç—Ä–∞–∂–∏ —Å–æ–º–Ω–µ–≤–∞—é—Ç—Å—è.",
    answers: [
      { text: "üåø –ó–∞—Å—Ç—É–ø–∏—Ç—å—Å—è –∏ —Ä—É—á–∞—Ç—å—Å—è –∑–∞ –µ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è.", scores: { sat: 3 } },
      { text: "üî• –£—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç—å –∑–∞ –ø–ª–∞—Ç—É.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥—Å—Ç—Ä–µ–∫–∞—Ç—å —Å—Ç—Ä–∞–∂—É –∏–∑–≥–Ω–∞—Ç—å –ø—Ä–∏—à–µ–ª—å—Ü–∞ —Å–∏–ª–æ–π.", scores: { tam: 3 } },
      { text: "‚öñÔ∏è –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–º–æ—â—å –∂—Ä–µ—Ü–æ–≤ –¥–ª—è –∏—Å–ø—ã—Ç–∞–Ω–∏—è –≤–µ—Ä—ã.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–í –ø–æ—Ä—Ç—É –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Ä–µ–¥–∫–∏–π –º–µ—Ç–∞–ª–ª –Ω–æ—á—å—é.",
    answers: [
      { text: "üåø –°–æ–æ–±—â–∏—Ç—å –æ —Å–¥–µ–ª–∫–µ —Ö—Ä–∞–º—É –∏ –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∏—á–∞–ª.", scores: { sat: 3 } },
      { text: "üî• –í—ã–±–∏—Ç—å –¥–æ–ª—é –∏ –Ω–∞–ª–∞–¥–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É –≤ –≥–∏–ª—å–¥–∏—é.", scores: { raj: 3 } },
      { text: "‚òæ –°–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä –¥–ª—è —Å–µ–±—è –∏ –∏—Å—á–µ–∑–Ω—É—Ç—å –Ω–∞ –ª–æ–¥–∫–µ.", scores: { tam: 4 } },
      { text: "üúÇ –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ –ø–æ—à–ª–∏–Ω–µ –∏ –ª–µ–≥–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ—Ä–≥.", scores: { raj: 2, sat: 1 } }
    ]
  },
  {
    question: "–ê–ª—Ö–∏–º–∏–∫ –ø—Ä–æ—Å–∏—Ç –∏—Å–ø—ã—Ç–∞—Ç—å –∑–µ–ª—å–µ, –º–µ–Ω—è—é—â–µ–µ –ø–∞–º—è—Ç—å –Ω–∞ —á–∞—Å.",
    answers: [
      { text: "üåø –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –∏ –ø–æ–∂–µ–ª–∞—Ç—å –µ–º—É –±–ª–∞–≥–æ—Ä–∞–∑—É–º–∏—è.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–∏–Ω—è—Ç—å –∑–µ–ª—å–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –≤ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö.", scores: { raj: 3 } },
      { text: "‚òæ –í—ã–ø–∏—Ç—å –¥–≤–∞–∂–¥—ã, —á—Ç–æ–±—ã —Å–ø—Ä—è—Ç–∞—Ç—å —Å–≤–æ—ë –ø—Ä–æ—à–ª–æ–µ.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –ù–∞–π—Ç–∏ –¥–æ–±—Ä–æ–≤–æ–ª—å—Ü–∞ —Å—Ä–µ–¥–∏ —Ç–µ–ª–µ–ø–∞—Ç–æ–≤ –≥–∏–ª—å–¥–∏–∏.", scores: { sat: 1, raj: 2 } }
    ]
  },
  {
    question: "–ù–∞ —Ç—ë–º–Ω–æ–º –±–µ—Ä–µ–≥—É —Ä—ã–±–∞–∫–∏ –Ω–∞—à–ª–∏ –∫–∞–º–µ–Ω—å, –∏–∑–ª—É—á–∞—é—â–∏–π –Ω–æ—á–Ω–æ–µ —Å–∏—è–Ω–∏–µ.",
    answers: [
      { text: "üåø –û—Ç–Ω–µ—Å—Ç–∏ –∫–∞–º–µ–Ω—å –≤ —Å–≤—è—Ç–∏–ª–∏—â–µ –∏ –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –±–æ–≥–∏–Ω—é.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –Ω–∞—Ö–æ–¥–∫—É –≤ —Ç–∞–ª–∏—Å–º–∞–Ω —Ç–æ—Ä–≥–æ–≤–ª–∏.", scores: { raj: 3 } },
      { text: "‚òæ –ù–æ—á—å—é —Å–±—Ä–æ—Å–∏—Ç—å –∫–∞–º–µ–Ω—å –≤ –±–µ–∑–¥–Ω—É, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ —É–≤–∏–¥–µ–ª.", scores: { tam: 3 } },
      { text: "üúÇ –†–∞–∑–¥–µ–ª–∏—Ç—å –∫–∞–º–µ–Ω—å –∏ –¥–∞—Ç—å –¥–æ–ª—é –æ–±—â–∏–Ω–µ.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ü–µ–ø–µ–ª—å–Ω—ã–µ –∫–æ—á–µ–≤–Ω–∏–∫–∏ –ø—Ä–æ—Å—è—Ç –ø—Ä–æ–≤–µ—Å—Ç–∏ –∏—Ö —á–µ—Ä–µ–∑ —á—É–∂–∏–µ –∑–µ–º–ª–∏.",
    answers: [
      { text: "üåø –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ –º–∏—Ä–µ –∏ –∏–¥—Ç–∏ —Å –Ω–∏–º–∏.", scores: { sat: 3 } },
      { text: "üî• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∑–Ω–∞–Ω–∏—è –ø—É—Å—Ç–æ—à–∏ –∑–∞ —É—Å–ª—É–≥—É.", scores: { raj: 3 } },
      { text: "‚òæ –ü—Ä–æ–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤—Ä–∞–≥–∞–º –∏ –∏—Å—á–µ–∑–Ω—É—Ç—å.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ —Å–æ–≤–µ—Ç—É –∏ –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞.", scores: { sat: 1, raj: 2 } }
    ]
  },
  {
    question: "–í —Ç–∞–≤–µ—Ä–Ω–µ –±–∞—Ä–¥ –ø–æ—ë—Ç —Å–∞—Ç–∏—Ä—É –ø—Ä–æ —Ö—Ä–∞–º, —Ç–æ–ª–ø–∞ —Å–º–µ—ë—Ç—Å—è.",
    answers: [
      { text: "üåø –ü–æ–ø—Ä–æ—Å–∏—Ç—å —Å–º–µ–Ω–∏—Ç—å —Ç–µ–º—É, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –µ–≥–æ —á–µ—Å—Ç—å.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –µ–≥–æ –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ —Å–≤–æ–µ–π –∫–æ—Ä—á–º–µ.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥–ª–∏—Ç—å –≤–∏–Ω–∞, —á—Ç–æ–±—ã –ø–µ—Å–Ω—è —Å—Ç–∞–ª–∞ –µ—â—ë –≥—Ä—É–±–µ–µ.", scores: { tam: 3 } },
      { text: "üúÇ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–æ–≤—ã–π –±–∞–ª–ª–∞–¥–Ω—ã–π –¥—É—ç—Ç –æ –≥–µ—Ä–æ—è—Ö.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–í –ª–µ–¥—è–Ω–æ–º –≥—Ä–æ—Ç–µ —á—É–¥–∏—Ç—Å—è –≥–æ–ª–æ—Å –¥—Ä–µ–≤–Ω–µ–≥–æ –≤–æ–∏–Ω–∞, –ø—Ä–æ—Å—è—â–∏–π –æ—Ç–æ–º—Å—Ç–∏—Ç—å.",
    answers: [
      { text: "üåø –ü–æ—Ö–æ—Ä–æ–Ω–∏—Ç—å –æ—Å—Ç–∞–Ω–∫–∏ –∏ –≤–æ–∑–Ω–µ—Å—Ç–∏ –º–æ–ª–∏—Ç–≤—É.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–∏–Ω—è—Ç—å –ø–æ—Ä—É—á–µ–Ω–∏–µ –∏ –∏—Å–∫–∞—Ç—å –≤—Ä–∞–≥–∞ —Ä–∞–¥–∏ —Å–ª–∞–≤—ã.", scores: { raj: 3 } },
      { text: "‚òæ –†–∞–∑–±—É–¥–∏—Ç—å –¥—É—Ö –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–∂–∏.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –ó–∞–ø–∏—Å–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏ –æ—Ç–Ω–µ—Å—Ç–∏ –µ—ë —Å–∫–∞–∑–∏—Ç–µ–ª—è–º.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ê—Ä–∫–∞–Ω–∏—Å—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç–≤–æ—é —Ç–µ–Ω—å —Ä–∞–¥–∏ –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä–æ–∫–ª—è—Ç–∏–π.",
    answers: [
      { text: "üåø –û—Ç–∫–∞–∑–∞—Ç—å—Å—è: –¥—É—à–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å–≤–æ–±–æ–¥–Ω–æ–π.", scores: { sat: 3 } },
      { text: "üî• –°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∑–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–±–µ–≥–∞—Ç—å –ª–æ–≤—É—à–µ–∫.", scores: { raj: 3 } },
      { text: "‚òæ –û–±–æ—Ä–≤–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä –∏ —É–Ω–µ—Å—Ç–∏ –ø–µ—á–∞—Ç—å —Å–µ–±–µ.", scores: { tam: 3 } },
      { text: "üúÇ –ò–∑—É—á–∏—Ç—å —Ä–∏—Ç—É–∞–ª –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Å–æ—é–∑–Ω–∏–∫–∞–º–∏.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–í –∞—Ä—Ö–∏–≤–µ –Ω–∞–π–¥–µ–Ω —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–Ω–∏–∫–æ–≤ –≥–∏–ª—å–¥–∏–∏.",
    answers: [
      { text: "üåø –°–ø–∏—Å–∞—Ç—å –¥–æ–ª–≥–∏ —Å–∏—Ä–æ—Ç –∏ –±–æ–ª—å–Ω—ã—Ö.", scores: { sat: 3 } },
      { text: "üî• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã —É—Å–∏–ª–∏—Ç—å —Å–≤–æ—ë –≤–ª–∏—è–Ω–∏–µ.", scores: { raj: 3 } },
      { text: "‚òæ –ü—Ä–æ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç–∞–º.", scores: { tam: 4 } },
      { text: "‚öñÔ∏è –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –¥–æ–ª–∂–Ω–∏–∫–∞–º–∏ –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫.", scores: { sat: 1, raj: 2 } }
    ]
  },
  {
    question: "–°—Ç–∞—Ä—ã–π –ø–∞—Ö–∞—Ä—å –ø–æ—Ç–µ—Ä—è–ª –∑–µ–º–ª—é –∏–∑-–∑–∞ –¥–æ–ª–≥–æ–≤ –∏ –ø—Ä–æ—Å–∏—Ç —Å–æ–≤–µ—Ç–∞.",
    answers: [
      { text: "üåø –°–æ–±—Ä–∞—Ç—å –¥–µ—Ä–µ–≤–Ω—é –∏ –≤–µ—Ä–Ω—É—Ç—å –µ–º—É –ø–æ–ª–µ.", scores: { sat: 3 } },
      { text: "üî• –í–ª–æ–∂–∏—Ç—å –¥–µ–Ω—å–≥–∏ –∏ –≤–∑—è—Ç—å –µ–≥–æ –≤ –¥–æ–ª—é.", scores: { raj: 3 } },
      { text: "‚òæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ —É–≥—Ä–æ–∑—É –¥—Ä—É–≥–∏–º –¥–æ–ª–∂–Ω–∏–∫–∞–º.", scores: { tam: 3 } },
      { text: "üúÇ –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—à–µ–Ω–∏–µ –≤ —Å–æ–≤–µ—Ç –∏ –¥–æ–±–∏—Ç—å—Å—è –æ—Ç—Å—Ä–æ—á–∫–∏.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–ú–∞—Å—Ç–µ—Ä –¥—É—ç–ª–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–µ–¥–∏–Ω–æ–∫ —Ä–∞–¥–∏ —Å–ª–∞–≤—ã –¥–æ–º–∞.",
    answers: [
      { text: "üåø –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –º–∏—Ä–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä.", scores: { sat: 3 } },
      { text: "üî• –ü—Ä–∏–Ω—è—Ç—å –≤—ã–∑–æ–≤ –∏ —Å–æ–±—Ä–∞—Ç—å –∑—Ä–∏—Ç–µ–ª–µ–π.", scores: { raj: 3 } },
      { text: "‚òæ –ü–æ–¥—Å—ã–ø–∞—Ç—å —è–¥ –≤ –æ—Ä—É–∂–∏–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞.", scores: { tam: 4 } },
      { text: "üúÇ –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ –¥–ª—è –º–æ–ª–æ–¥—ã—Ö –≤–æ–∏–Ω–æ–≤.", scores: { sat: 2, raj: 1 } }
    ]
  },
  {
    question: "–î–µ—Ä–µ–≤–Ω—é –º—É—á–∞—é—Ç —Å–Ω—ã –æ–± –æ–≥–Ω–µ–Ω–Ω–æ–º –∑–≤–µ—Ä–µ.",
    answers: [
      { text: "üåø –ü—Ä–æ–≤–µ—Å—Ç–∏ –æ—á–∏—â–∞—é—â–∏–π –æ–±—Ä—è–¥ –∏ —É—Å–ø–æ–∫–æ–∏—Ç—å –ª—é–¥–µ–π.", scores: { sat: 3 } },
      { text: "üî• –ù–∞–π—Ç–∏ –∑–≤–µ—Ä—è –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –ª–µ–≥–µ–Ω–¥—É –≤ —è—Ä–º–∞—Ä–∫—É.", scores: { raj: 3 } },
      { text: "‚òæ –£—Å–∏–ª–∏—Ç—å —Å—Ç—Ä–∞—Ö –∏ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ —Ç–∞–ª–∏—Å–º–∞–Ω—ã.", scores: { tam: 4 } },
      { text: "üúÇ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–≤–µ–¥–∫—É –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ —Å —Å–æ—Å–µ–¥—è–º–∏.", scores: { sat: 2, raj: 1 } }
    ]
  }
];


const GROUPS = {
  sat: {
    title: "–°–≤–µ—Ç",
    text: "–¢—ã –Ω–µ—Å—ë—à—å —è—Å–Ω–æ—Å—Ç—å –∏ –º—è–≥–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ. –î–∞–∂–µ –≤ –ø–µ–ø–µ–ª—å–Ω–æ–π –±—É—Ä–µ –≤–∏–¥–∏—à—å –¥–æ—Ä–æ–≥—É –¥–ª—è –≤—Å–µ—Ö.",
    link: "https://t.me/+SNNjufNTtGJhMDI6"
  },
  raj: {
    title: "–û–≥–æ–Ω—å",
    text: "–¢—ã –ø–∏—Ç–∞–µ—à—å—Å—è –¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ –ø–æ–±–µ–¥–∞–º–∏. –ú–∏—Ä –≤–æ–∫—Ä—É–≥ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—à—å —Ä–µ—à–µ–Ω–∏–µ.",
    link: "https://t.me/+B-mozvEpxM5kZjVi"
  },
  tam: {
    title: "–ù–æ—á—å",
    text: "–¢–∏—à–∏–Ω–∞ –∏ –≥–ª—É–±–∏–Ω–∞ —Ç–≤–æ–∏ —Å–æ—é–∑–Ω–∏–∫–∏. –¢—ã —É–º–µ–µ—à—å –ø—Ä—è—Ç–∞—Ç—å —Å–ª–µ–¥—ã –∏ —Å–ª—É—à–∞—Ç—å –≥–æ–ª–æ—Å –º—Ä–∞–∫–∞.",
    link: "https://t.me/+K8aDzjYAsOg3Y2Fi"
  }
};

const tieBreakOrder = ["sat", "raj", "tam"];

const app = {
  start: document.getElementById("screen-start"),
  quiz: document.getElementById("screen-quiz"),
  result: document.getElementById("screen-result"),
  btnStart: document.getElementById("btn-start"),
  btnRestart: document.getElementById("btn-restart"),
  qContainer: document.getElementById("question-container"),
  resultTitle: document.getElementById("result-title"),
  resultText: document.getElementById("result-text"),
  resultStats: document.getElementById("result-stats"),
  resultLink: document.getElementById("result-link")
};

let state = {
  index: 0,
  score: { sat: 0, raj: 0, tam: 0 },
  quiz: [],
  flow: createFlowState()
};

function shuffleArray(source) {
  const array = source.slice();
  for (let i = array.length - 1; i > 0; i -= 1) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function showScreen(element) {
  [app.start, app.quiz, app.result].forEach((screen) => screen.classList.remove("active"));
  element.classList.add("active");
}

function startQuiz() {
  const totalAnswers = BASE_QUIZ.reduce((acc, question) => acc + question.answers.length, 0);
  const matrixDeck = buildMatrixDeck(totalAnswers);
  let deckIndex = 0;

  state = {
    index: 0,
    score: { sat: 0, raj: 0, tam: 0 },
    flow: createFlowState(),
    quiz: shuffleArray(BASE_QUIZ).map((question) => ({
      ...question,
      answers: shuffleArray(question.answers).map((answer) => {
        const blend = matrixDeck[deckIndex % matrixDeck.length];
        deckIndex += 1;
        return {
          ...answer,
          appliedScores: mixScoresWithMatrix(answer.scores, blend.matrix)
        };
      })
    }))
  };

  showScreen(app.quiz);
  renderQuestion();
}

function renderQuestion() {
  const question = state.quiz[state.index];
  app.qContainer.innerHTML = "";

  const progress = document.createElement("p");
  progress.className = "question-progress";
  progress.textContent = `–í–æ–ø—Ä–æ—Å ${state.index + 1} –∏–∑ ${state.quiz.length}`;

  const title = document.createElement("h2");
  title.textContent = question.question;

  const answersWrap = document.createElement("div");
  answersWrap.className = "answers";

  question.answers.forEach((answer) => {
    const btn = document.createElement("button");
    btn.className = "answer";
    btn.textContent = answer.text;
    btn.addEventListener("click", () => selectAnswer(answer));
    answersWrap.appendChild(btn);
  });

  app.qContainer.append(progress, title, answersWrap);
}

function selectAnswer(answer) {
  if (!state.flow) {
    state.flow = createFlowState();
  }

  const baseScores = answer.appliedScores ?? mixScoresWithMatrix(answer.scores, null);
  const modulation = computeModulation(state.flow);
  const contributions = { sat: 0, raj: 0, tam: 0 };

  GUNA_KEYS.forEach((key) => {
    const baseValue = baseScores?.[key] ?? 0;
    const finalValue = baseValue * modulation[key];
    state.score[key] += finalValue;
    contributions[key] = finalValue;
  });

  updateFlow(state.flow, contributions);

  state.index += 1;
  if (state.index < state.quiz.length) {
    renderQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz() {
  const normalized = {};
  let total = 0;

  GUNA_KEYS.forEach((key) => {
    const value = state.score[key];
    const normalizedValue = Math.sqrt(Math.max(0, value));
    normalized[key] = normalizedValue;
    total += normalizedValue;
  });

  const sorted = GUNA_KEYS.slice().sort((a, b) => {
    if (normalized[b] !== normalized[a]) {
      return normalized[b] - normalized[a];
    }
    if (state.score[b] !== state.score[a]) {
      return state.score[b] - state.score[a];
    }
    return tieBreakOrder.indexOf(a) - tieBreakOrder.indexOf(b);
  });

  const winner = sorted[0];
  const group = GROUPS[winner];

  const percentages = {};
  GUNA_KEYS.forEach((key) => {
    const percent = total === 0 ? 0 : Math.round((normalized[key] / total) * 100);
    percentages[key] = percent;
  });

  app.resultTitle.textContent = group.title;
  app.resultText.textContent = group.text;
  app.resultStats.textContent = `${GROUPS.sat.title}: ${percentages.sat}% ¬∑ ${GROUPS.raj.title}: ${percentages.raj}% ¬∑ ${GROUPS.tam.title}: ${percentages.tam}%`;
  app.resultLink.href = group.link;

  showScreen(app.result);
}

app.btnStart.addEventListener("click", startQuiz);
app.btnRestart.addEventListener("click", startQuiz);
